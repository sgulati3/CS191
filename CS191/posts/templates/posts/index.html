{% include "includes/head.html" %}
{% include "includes/header.html" %}

<main>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-3 col-sm-3" id="topics-container">
				<div class="list-group affix-pre" id="topics" data-clampedwidth="#topics-container">
					<a href="#" class="list-group-item active">
						<h4 class="list-group-item-heading">Justice Scalia</h4>
						<p class="list-group-item-text">48,283 conversations</p>
					</a>
					<a href="#" class="list-group-item list-group-item-success">
						<h4 class="list-group-item-heading">United States vs. Ferguson</h4>
						<p class="list-group-item-text">
							<p>39482 conversations</p>
							<p><i class="fa fa-line-chart hot-topic"></i></p>
						</p>
					</a>
					<a href="#" class="list-group-item">
						<h4 class="list-group-item-heading">GOP Debate</h4>
						<p class="list-group-item-text">30,282 conversations</p>
					</a>
					<a href="#" class="list-group-item">
						<h4 class="list-group-item-heading">Grammy's</h4>
						<p class="list-group-item-text">14,324 conversations</p>
					</a>
					<a href="#" class="list-group-item">
						<h4 class="list-group-item-heading">World War 2</h4>
						<p class="list-group-item-text">2,342 conversations</p>
					</a>
				</div>
			</div>

			<div class="col-md-9 col-sm-9">
				<div class="row">
					<div class="col-md-12 col-sm-12">
                        <div class="panel panel-primary">
							<div class="panel-body">
                                <a type="submit" href="{% url 'posts:create' %}">Submit new post</a>
                                <br/>
                                <div class="pagination">
                                    <span class="step-links">
                                        {% if latest_post_list.has_previous %}
                                            <a href="?page={{ latest_post_list.previous_page_number }}">previous</a>
                                        {% endif %}

                                        <span class="current">
                                            - {{ latest_post_list.number }} of {{ latest_post_list.paginator.num_pages }} - 
                                        </span>

                                        {% if latest_post_list.has_next %}
                                            <a href="?page={{ latest_post_list.next_page_number }}">next</a>
                                        {% endif %}
                                        (Currently displays 5 posts at a time. Can change this in views.py)
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% if latest_post_list %}
						{% for post in latest_post_list %}
						<div class="col-md-12 col-sm-12">
							<div class="panel panel-primary">
								<div class="panel-heading clearfix">
									<h3 class="panel-title pull-left">{{ post.title }}</h3>
                                    <span class="pull-right">Event Date: {{ post.event_date }} | Submission Date: {{ post.sub_date }} | Location: {{ post.location }}</span>
								</div>
								<div class="panel-body">
									<p>{{ post.text }}</p>
									Tags:
									{% for tag in tag_map|get_tags:post.id %}
										<div class="unvoted-tag update-tag" value="{{ tag.title }}" postid="{{ post.id }}">{{ tag.title }}
		                                (<div class="update-tag-votes">{{ tag.votes }}</div>)
		                            </div>
									{% endfor %}

									{% if post.url %}
									<p>
										<a href="{{ post.url }}">External Link</a>
									</p> 
									{% endif %}
								</div>
								<div class="panel-footer clearfix">
									<span class="pull-left">
										{{ post.get_post_type_display }}
									</span> 
									<span class="pull-right">
	                                    <a href="{{ post.get_absolute_url }}">Post Detail</a>
									</span> 
								</div> 
							</div>
						</div>
						{% endfor %}
					{% else %}
					<div class="col-md-12 col-sm-12">
						<h3>No posts available</h3>
					</div>
					{% endif %}
				</div>
			</div>
		</div>

	</div>
</main>

{% include "includes/tags.html" %}
