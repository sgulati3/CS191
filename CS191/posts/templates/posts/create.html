<h1>New Post</h1>

<form action="{% url 'posts:create' %}" method="post">
    {% csrf_token %}
    {{ form.as_p }}

    <p id="tag-message"></p>
    <input id="new-tag" type="text"/>
    <button id="new-tag-button">Add Tag</button>
    <div>Tags:<div id="tag-list"></div></div>
    <br/>

    <input type="submit" value="Submit"/>

    <input id="num-tags" type="hidden" name="numTags" value="0"/>
    <div id="hidden-tags"><div>
</form>
<br/>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script>
$(document).ready(function() {                                                
  tagList = [];

  $('#new-tag-button').click(function() {                                     
    var newTag = $('#new-tag').val().replace(/\s/g, '');

    if (newTag.length == 0) {
        $("#tag-list").text("");
    } else if (newTag.length > 16) {
        $("#tag-list").text("Your tag was too long");
    } else {
        $("#tag-list").text("");
        tagList.push(newTag);
        $('#num-tags').val(tagList.length);
        $('#hidden-tags').append('<input type="hidden" name="tag' + (tagList.length-1) + '" value="' + newTag + '"/>');
    }

    $('#new-tag').val("");
    $("#tag-list").text(tagList.join(', '));
    return false;
  });                                                                         
});  
</script>
